{"version":3,"sources":["../../src/config/db-connect.js"],"names":["mongoose","Promise","global","setupDBConnection","env","url","connect","useNewUrlParser","useFindAndModify","autoIndex","reconnectTries","reconnectInterval","poolSize","bufferMaxEntries"],"mappings":";;;;;;;AAGA;;;;;;AAEAA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B,C,CALA;;;AAOO,IAAME,gDAAoB,SAApBA,iBAAoB,CAACC,GAAD,EAAO;AACpC,QAAIC,YAAJ;AACA,YAAOD,GAAP;AACI,aAAK,KAAL;AACIC;AACA;AACJ,aAAK,MAAL;AACIA;AACA;AANR,KAOC;AACDL,uBAASM,OAAT,CAAiBD,GAAjB,EAAsB;AAClBE,yBAAiB,IADC;AAElBC,0BAAkB,KAFA;AAGlBC,mBAAW,KAHO,EAGA;AAClBC,wBAAgB,GAJE,EAIG;AACrBC,2BAAmB,GALD,EAKM;AACxBC,kBAAU,EANQ,EAMJ;AACd;AACA;AACAC,0BAAkB;AATA,KAAtB;AAWH,CArBM","file":"db-connect.js","sourcesContent":["/**\r\n * Module to setup mongoose connection\r\n */\r\nimport mongoose from 'mongoose';\r\n\r\nmongoose.Promise = global.Promise;\r\n\r\nexport const setupDBConnection = (env)=>{\r\n    let url;\r\n    switch(env) {\r\n        case 'DEV':\r\n            url = `mongodb://localhost/QuestApp`\r\n            break;\r\n        case 'PROD':\r\n            url = `mongodb://admin:zuko2352@ds347707.mlab.com:47707/quest-app-db`;\r\n            break;\r\n    };\r\n    mongoose.connect(url, {\r\n        useNewUrlParser: true,\r\n        useFindAndModify: false,\r\n        autoIndex: false, // Don't build indexes\r\n        reconnectTries: 100, // Never stop trying to reconnect\r\n        reconnectInterval: 500, // Reconnect every 500ms\r\n        poolSize: 10, // Maintain up to 10 socket connections\r\n        // useMongoClient: true,\r\n        // If not connected, return errors immediately rather than waiting for reconnect\r\n        bufferMaxEntries: 0\r\n    });\r\n};"]}